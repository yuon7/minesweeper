(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(85)}])},85:function(e,t,a){"use strict";a.r(t);var n=a(5893),l=a(7294),r=a(2729),c=a.n(r);let i=()=>{let[e,t]=(0,l.useState)([10,8,8]),[a,r]=(0,l.useState)(!0),[i,s]=(0,l.useState)(0),[d,o]=(0,l.useState)(!1),[_,u]=(0,l.useState)([...Array(e[2])].map(()=>[...Array(e[1])].map(()=>0))),[x,p]=(0,l.useState)([...Array(e[2])].map(()=>[...Array(e[1])].map(()=>-1))),m=[[1,-1],[1,0],[1,1],[-1,-1],[-1,0],[-1,1],[0,-1],[0,1]],f=[...Array(e[2]).map(()=>[...Array(e[1])].map(()=>-1))],h=[...Array(e[2])].map(()=>[...Array(e[1])].map(()=>0));(0,l.useEffect)(()=>{if(a)return;let e=setInterval(()=>{s(e=>e+1)},1e3);return()=>{clearInterval(e)}},[a]);let v=(t,a)=>t<0||t>=e[1]||a<0||a>=e[2],g=t=>{[...Array(e[1])].map((a,n)=>{[...Array(e[2])].map((e,a)=>{m.map(e=>{let[l,r]=e,c=l+n,i=r+a;v(c,i)||10!==t[a][n]||10===t[i][c]||(t[i][c]+=1)})})}),p(t)},N=(t,a,n)=>{let l=()=>{if(n.flat().filter(e=>10===e).length>=e[0]){p(n);return}let r=Math.floor(Math.random()*e[2]),c=Math.floor(Math.random()*e[1]);r===a&&c===t?n[r][c]=-1:n[r][c]=10,l()};l()},y=e[0]-_.flat().filter(e=>3===e).length,b=_.flat().filter(e=>0===e).length+_.flat().filter(e=>3===e).length===e[0],j=(e,t)=>{let a=structuredClone(_),n=structuredClone(x),l=(e,t)=>{0===a[t][e]&&(a[t][e]=1,-1===n[t][e]&&(n[t][e]=-2,m.map(a=>{let[n,r]=a,c=n+e,i=r+t;v(c,i)||l(c,i)})))};0===x.flat().filter(e=>10===e).length&&(N(e,t,n),g(n),r(!1)),10!==n[t][e]||b||0!==a[t][e]&&1!==a[t][e]||(x.map((e,t)=>{e.map((e,n)=>{10===e&&(a[t][n]=1)})}),u(a),r(!0),o(!0),n[t][e]+=1,p(n)),b||d||0!==a[t][e]&&1!==a[t][e]||l(e,t),u(a),p(n)},C=(e,t,a)=>{a.preventDefault();let n=structuredClone(_),l=n[t][e];0!==l||b||d?3===l&&(n[t][e]=0):n[t][e]=3,u(n)};(0,l.useEffect)(()=>{r(!0)},[b]);let k=()=>{p(f),u(h),r(!0),s(0),o(!1)},S=()=>{t([10,9,9]),r(!0),s(0),k()},w=()=>{t([40,16,16]),r(!0),s(0),k()},A=()=>{t([99,30,16]),r(!0),s(0),k()};return(0,n.jsxs)("div",{className:c().container,children:[(0,n.jsxs)("div",{className:c().levels,children:[(0,n.jsx)("div",{className:c().level,children:(0,n.jsx)("button",{onClick:S,children:"初級"})}),(0,n.jsx)("div",{className:c().level,children:(0,n.jsx)("button",{onClick:w,children:"中級"})}),(0,n.jsx)("div",{className:c().level,children:(0,n.jsx)("button",{onClick:A,children:"上級"})})]}),(0,n.jsxs)("div",{className:c().board,style:{width:"".concat(e[1]>=9?70+35.8*e[1]:356.4,"px"),height:"".concat(200+35.8*e[2],"px")},children:[(0,n.jsxs)("div",{className:c().top,style:{width:"".concat(e[1]>=9?35.8*e[1]:296.4,"px")},children:[(0,n.jsx)("div",{className:c().flagCount,children:String(y).padStart(3,"0")}),(0,n.jsx)("div",{className:c().face,style:{backgroundPosition:"".concat(d?-520:b?-480:-440,"px 0px")},onClick:()=>k()}),(0,n.jsx)("div",{className:c().timer,children:String(i).padStart(3,"0")})]}),(0,n.jsx)("div",{className:c().game,style:{width:"".concat(35.4*e[1]+10,"px"),height:"".concat(35.4*e[2]+10,"px")},children:(0,n.jsx)("div",{className:c().boardStyle,style:{width:"".concat(35*e[1],"px"),height:"".concat(35*e[2],"px")},children:_.map((e,t)=>e.map((e,a)=>(0,n.jsx)("div",{className:c().num,style:{backgroundPosition:"".concat(11===x[t][a]?-297:-29.8*x[t][a],"px 1.7px"),backgroundColor:"".concat({0:"#c6c6c6",12:"red"}[x[t][a]+1])},children:(0,n.jsx)("div",{className:c().tile,style:{border:[void 0,"0px"][e],background:["#c6c6c6","transparent"][e]},onClick:()=>j(a,t),onContextMenu:e=>C(a,t,e),children:(0,n.jsx)("div",{className:c().flag,style:{backgroundPosition:"".concat({0:30,1:30,2:-184,3:-207}[_[t][a]],"px 1.5px")}})},"".concat(a,"-").concat(t))},"".concat(a,"-").concat(t))))})})]})]})};t.default=i},2729:function(e){e.exports={container:"index_container__gnN1f",board:"index_board__2d6xe",top:"index_top__uMqHF",num:"index_num__RUJ1g",game:"index_game__d00rA",boardStyle:"index_boardStyle__Ka7n2",tile:"index_tile__BL_fN",flag:"index_flag__Bsg_z",face:"index_face__Yr_Hp",flagCount:"index_flagCount__ToXUZ",timer:"index_timer__azvpY",level:"index_level__wF3It",levels:"index_levels__0ebgi"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);